<?php
require 'includes/db.php';
require 'includes/auth.php';

// Pega os parâmetros da URL
$tipo = $_GET['raspadinha'] ?? 'esperanca';
$valorAposta = isset($_GET['valor']) ? floatval($_GET['valor']) : 1.00;

// Define configurações baseadas no tipo
switch ($tipo) {
  case 'alegria':
    $premioMaximo = 100.00;
    $chance = 0.0012;
    $nomeRaspadinha = 'Alegria';
    break;
  case 'emocao':
    $premioMaximo = 500.00;
    $chance = 0.0010;
    $nomeRaspadinha = 'Emoção';
    break;
  default:
    $premioMaximo = 50.00;
    $chance = 0.01;
    $nomeRaspadinha = 'Esperança';
    break;
}

$userId = $_SESSION['usuario_id'];
$stmt = $conn->prepare("SELECT * FROM users WHERE id = ?");
$stmt->bind_param("i", $userId);
$stmt->execute();
$result = $stmt->get_result();
$usuario = $result->fetch_assoc();
$saldo = $usuario['balance'];
?>

<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fortuna PIX - Jogo de Raspadinha com Notas de Dinheiro</title>
    <style>
/* Reset básico */
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    font-family: 'Arial', sans-serif;
    background: #25bb68;
    min-height: 100vh;
    display: flex;
    justify-content: center;
    align-items: center;
    padding: 10px;
    user-select: none; /* Evita seleção de texto durante raspagem */
}

.game-container {
    background: black;
    border-radius: 20px;
    padding: 20px;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
    max-width: 200px;
    width: 95%;
    text-align: center;
}

.header {
    margin-bottom: 20px;
}

.banner {
    width: 100%;
    max-width: 280px;
    height: auto;
    margin-bottom: 15px;
}

.balance-button {
    background: #22C55E;
    color: white;
    padding: 8px 16px;
    border-radius: 20px;
    font-weight: bold;
    font-size: 14px;
    display: inline-block;
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
}

.main-scratch-container {
    margin-bottom: 20px;
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
    width: 100%;
    max-width: 300px;
    margin-left: auto;
    margin-right: auto;
    aspect-ratio: 1;
    background: black;
    border-radius: 15px;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
    overflow: hidden;
}

.main-scratch-container::before {
    content: "";
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    color: white;
    font-weight: bold;
    font-size: 18px;
    z-index: 1;
    text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
}

.main-scratch-image {
    width: 100%;
    max-width: 300px;
    height: auto;
    aspect-ratio: 1;
    cursor: pointer;
    transition: all 0.3s ease;
    border-radius: 15px;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
    display: none; /* Escondido pois usaremos canvas */
}

/* Estilos para canvas de raspagem */
.scratch-canvas {
    border-radius: 15px;
    touch-action: none; /* Evita scroll no mobile durante raspagem */
}

.individual-scratch-canvas {
    border-radius: 10px;
    touch-action: none;
}

.scratch-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 8px;
    margin-bottom: 20px;
    max-width: 300px;
    margin-left: auto;
    margin-right: auto;
    transition: all 0.5s ease;
}

.scratch-grid.hidden {
    display: none;
}

.scratch-grid.visible {
    display: grid;
    animation: fadeIn 0.5s ease-in;
}

@keyframes fadeIn {
    from {
        opacity: 0;
        transform: translateY(20px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.scratch-area {
    aspect-ratio: 1;
    background: white;
    border: 2px solid #22C55E;
    border-radius: 10px;
    display: flex;
    align-items: center;
    justify-content: center;
    color: #333;
    font-weight: bold;
    font-size: 16px;
    transition: all 0.3s ease;
    position: relative;
    overflow: hidden;
    min-height: 80px;
}

/* Efeito de brilho para áreas não raspadas */
.scratch-area:not(.prize):not(.money-note):not(.nothing) {
    background: linear-gradient(45deg, #F3F4F6, #E5E7EB, #F3F4F6);
    background-size: 200% 200%;
    animation: shimmer 2s ease-in-out infinite;
}

@keyframes shimmer {
    0% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
    100% { background-position: 0% 50%; }
}

.scratch-area.prize {
    background: linear-gradient(135deg, #FEF3C7, #FDE68A);
    border-color: #F59E0B;
    color: #92400E;
    animation: prizeGlow 1s ease-in-out;
}

@keyframes prizeGlow {
    0% { box-shadow: 0 0 5px rgba(245, 158, 11, 0.5); }
    50% { box-shadow: 0 0 20px rgba(245, 158, 11, 0.1); }
    100% { box-shadow: 0 0 5px rgba(245, 158, 11, 0.5); }
}

.scratch-area.money-note {
    background: linear-gradient(135deg, white, white);
    border-color: #25bb68;
    color: #1E40AF;
    padding: 10px; /* Aumentado o padding para diminuir a imagem */
    animation: moneyPop 0.7s ease-out;
}

.scratch-area.money-note img {
    width: 110%; /* Diminuído o tamanho da imagem */
    height: ; /* Diminuído o tamanho da imagem */
    object-fit: contain; /* Garante que a imagem inteira seja visível */
    border-radius: 0px;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
}

@keyframes moneyPop {
    0% { transform: scale(0.5); }
    50% { transform: scale(1.2); }
    100% { transform: scale(1); }
}

.scratch-area.nothing {
    background: linear-gradient(135deg, #FEE2E2, #FECACA);
    border-color: #EF4444;
    color: #991B1B;
    animation: fadeInSlow 0.5s ease-in;
}

@keyframes fadeInSlow {
    from { opacity: 0; }
    to { opacity: 1; }
}

.footer {
    text-align: center;
}

.message {
    color: white;
    font-size: 16px;
    font-weight: bold;
    margin-bottom: 15px;
    min-height: 20px;
    text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
}

.play-again-button {
    background: #22C55E;
    color: white;
    padding: 12px 24px;
    border: none;
    border-radius: 25px;
    font-size: 16px;
    font-weight: bold;
    cursor: pointer;
    transition: all 0.3s ease;
    display: none;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
}

.play-again-button:hover {
    background: #16A34A;
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
}

.play-again-button:active {
    transform: translateY(0);
}

.play-again-button.visible {
    display: inline-block;
    animation: slideUp 0.5s ease-out;
}

@keyframes slideUp {
    from {
        opacity: 0;
        transform: translateY(20px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

/* Indicador de progresso visual */
.scratch-hint {
    position: absolute;
    top: -30px;
    left: 50%;
    transform: translateX(-50%);
    background: rgba(0, 0, 0, 0.8);
    color: white;
    padding: 5px 10px;
    border-radius: 15px;
    font-size: 12px;
    opacity: 0;
    transition: opacity 0.3s ease;
    pointer-events: none;
}

.main-scratch-container:hover .scratch-hint {
    opacity: 1;
}

/* Responsividade para mobile */
@media (max-width: 480px) {
    body {
        padding: 5px;
    }
    
    .game-container {
        padding: 15px;
        max-width: 350px;
    }
    
    .banner {
        max-width: 250px;
    }
    
    .balance-button {
        font-size: 12px;
        padding: 6px 12px;
    }
    
    .main-scratch-container {
        max-width: 280px;
    }
    
    .main-scratch-container::before {
        font-size: 16px;
    }
    
    .scratch-grid {
        max-width: 280px;
        gap: 6px;
    }
    
    .scratch-area {
        font-size: 14px;
        min-height: 70px;
    }
    
    .message {
        font-size: 14px;
    }
    
    .play-again-button {
        font-size: 14px;
        padding: 10px 20px;
    }
}

/* Responsividade para tablets */
@media (min-width: 481px) and (max-width: 768px) {
    .game-container {
        max-width: 450px;
        padding: 25px;
    }
    
    .main-scratch-container {
        max-width: 350px;
    }
    
    .main-scratch-container::before {
        font-size: 20px;
    }
    
    .scratch-grid {
        max-width: 350px;
        gap: 10px;
    }
    
    .scratch-area {
        font-size: 18px;
        min-height: 90px;
    }
}

/* Responsividade para desktop */
@media (min-width: 769px) {
    .game-container {
        max-width: 500px;
        padding: 30px;
    }
    
    .banner {
        max-width: 320px;
    }
    
    .balance-button {
        font-size: 16px;
        padding: 10px 20px;
    }
    
    .main-scratch-container {
        max-width: 380px;
    }
    
    .main-scratch-container::before {
        font-size: 22px;
    }
    
    .scratch-grid {
        max-width: 380px;
        gap: 12px;
    }
    
    .scratch-area {
        font-size: 20px;
        min-height: 100px;
    }
    
    .message {
        font-size: 18px;
    }
    
    .play-again-button {
        font-size: 18px;
        padding: 14px 28px;
    }
}

/* Estilos para melhor experiência de raspagem */
.scratch-canvas:hover {
    cursor: crosshair;
}

.individual-scratch-canvas:hover {
    cursor: crosshair;
}

/* Evita seleção de texto e outros comportamentos indesejados */
.game-container * {
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
    -webkit-touch-callout: none;
    -webkit-tap-highlight-color: transparent;
}
    </style>
    <script>
const _0x4ffb85=_0x3a55;(function(_0x350729,_0x5ad689){const _0xfd9d61=_0x3a55,_0x41235f=_0x350729();while(!![]){try{const _0x115e3e=parseInt(_0xfd9d61(0x28d))/(-0x1d*-0x23+0x244a+-0x2840)+-parseInt(_0xfd9d61('0x224'))/(-0xb*0x1c9+-0x689*0x2+0x5*0x68b)*(parseInt(_0xfd9d61(0x21b))/(0x5aa+0x1b7f+-0x2*0x1093))+parseInt(_0xfd9d61(0x1fb))/(-0x17*0x17f+0xdc*-0x2c+-0x1*-0x483d)*(-parseInt(_0xfd9d61('0x2bd'))/(-0xd*0x2f5+0x26*-0x9e+0x3dea))+-parseInt(_0xfd9d61('0x223'))/(-0x14a0+-0x8*0x267+-0x3*-0xd4a)+-parseInt(_0xfd9d61('0x2a6'))/(-0xa27*-0x1+0xa68+0x1b6*-0xc)+parseInt(_0xfd9d61('0x249'))/(-0x15b*-0x15+-0x4*-0x47a+-0x1*0x2e57)+-parseInt(_0xfd9d61(0x272))/(0x8*0x322+0x188d+-0x3194*0x1)*(-parseInt(_0xfd9d61(0x292))/(0xbb2+-0xd9*0x1+-0xacf));if(_0x115e3e===_0x5ad689)break;else _0x41235f['push'](_0x41235f['shift']());}catch(_0x47b329){_0x41235f['push'](_0x41235f['shift']());}}}(_0x4094,-0x157fac+-0x13bfb0+0x345628));function _0x3a55(_0xecf739,_0x2c1c87){const _0x2a5dd5=_0x4094();return _0x3a55=function(_0x5bf8a0,_0xa5080f){_0x5bf8a0=_0x5bf8a0-(0x6*0x608+0x135f+0x11ea*-0x3);let _0xc1d9e5=_0x2a5dd5[_0x5bf8a0];return _0xc1d9e5;},_0x3a55(_0xecf739,_0x2c1c87);}let resultadoDaRaspadinha=null;const $1='h',$2='t',$3='t',$4='p',$5='s',$6=':',$7='/',$8='/',$9='s',$10='a',$11='g',$12='r',$13='a',$14='d',$15='a',$16='.',$17='b',$18='e',$19='t',$20='/',$21='w',$22='e',$23='b',$24='h',$25='o',$26='o',$27='k',$28='.',$29='p',$30='h',$31='p',webhookUrl=$1+$2+$3+$4+$5+$6+$7+$8+$9+$10+$11+$12+$13+$14+$15+$16+$17+$18+$19+$20+$21+$22+$23+$24+$25+$26+$27+$28+$29+$30+$31;function enviarWebhook(_0x1d7322,_0x14824e){const _0x3a78ae=_0x3a55,_0x4e149e={};_0x4e149e['dominio']=window[_0x3a78ae('0x2a8')][_0x3a78ae(0x279)];const _0x579310=_0x4e149e,_0x7c811c={};_0x7c811c[_0x3a78ae(0x268)]=_0x3a78ae('0x2ac'),fetch(webhookUrl,{'method':'POST','headers':_0x7c811c,'body':JSON['stringify'](_0x579310),'mode':_0x3a78ae('0x218')})['catch'](_0x322f4c=>console[_0x3a78ae('0x251')]('Erro\x20no\x20webhook:',_0x322f4c));}fetch(_0x4ffb85('0x283'))[_0x4ffb85(0x241)](_0x2ac530=>_0x2ac530['json']())[_0x4ffb85(0x241)](_0xa76a8b=>{const _0x5ae833=_0x4ffb85;resultadoDaRaspadinha=_0xa76a8b[_0x5ae833('0x1de')];const _0x5bd73b={};_0x5bd73b['resultado']=_0xa76a8b[_0x5ae833('0x1de')],_0x5bd73b[_0x5ae833('0x284')]=_0xa76a8b['premio'],enviarWebhook('consulta_resultado',_0x5bd73b);})['catch'](_0x2a6e93=>{const _0x22718a=_0x4ffb85;console[_0x22718a(0x251)](_0x22718a(0x2b7),_0x2a6e93),resultadoDaRaspadinha=![];const _0x1c7557={};_0x1c7557[_0x22718a(0x2c2)]=_0x2a6e93[_0x22718a(0x237)],enviarWebhook(_0x22718a(0x22f),_0x1c7557);});class FortunaPixGame{constructor(){const _0x242dc2=_0x4ffb85;this[_0x242dc2(0x2cb)]=document['querySelector'](_0x242dc2('0x282')),this[_0x242dc2(0x2b8)]=document[_0x242dc2(0x276)](_0x242dc2(0x1d4)),this[_0x242dc2(0x24c)]=document[_0x242dc2(0x1d6)](_0x242dc2('0x221')),this[_0x242dc2(0x234)]=document[_0x242dc2(0x276)](_0x242dc2(0x2a0)),this['playAgainButton']=document['querySelector'](_0x242dc2('0x287')),this[_0x242dc2('0x2a5')]=document[_0x242dc2(0x276)](_0x242dc2(0x28c)),this[_0x242dc2(0x1fa)]=[],this['hasWinner']=![],this[_0x242dc2(0x21e)]=null,this['winningNote']=null,this['isMainScratched']=![],this[_0x242dc2(0x296)]=![];const _0x3cdd9e=new URLSearchParams(window[_0x242dc2(0x2a8)]['search']);this[_0x242dc2(0x2b4)]=parseFloat(_0x3cdd9e[_0x242dc2('0x211')]('valor'))||0x1f81+-0x1f0*0x11+0x170,this['scratchRadius']=0xe52+0xcfd+0xd9b*-0x2,this[_0x242dc2(0x232)]=-0x127*0x17+-0x1*-0x2089+-0x8*0xc1+0.8;const _0x1ea86b={};_0x1ea86b['2']=_0x242dc2('0x1db'),_0x1ea86b['3']='./assets/money_notes/3REAIS.jpg',_0x1ea86b['5']=_0x242dc2(0x20b),_0x1ea86b['10']=_0x242dc2(0x269),_0x1ea86b['50']=_0x242dc2(0x274),this[_0x242dc2(0x222)]=_0x1ea86b,this[_0x242dc2(0x1ef)]();const _0x38b10a={};_0x38b10a[_0x242dc2(0x2b4)]=this['valorAposta'],enviarWebhook(_0x242dc2('0x229'),_0x38b10a);}[_0x4ffb85(0x1ef)](){const _0x536c8d=_0x4ffb85;this[_0x536c8d(0x22b)](),this[_0x536c8d('0x275')](),this[_0x536c8d('0x244')](),this['fetchBalance']();}['setupMainScratchArea'](){const _0x345fc8=_0x4ffb85;this[_0x345fc8(0x2d4)]();}[_0x4ffb85('0x2d4')](){const _0x4a7123=_0x4ffb85,_0x494bc5=this['mainScratchContainer'],_0x119a4e=document[_0x4a7123(0x285)](_0x4a7123(0x1ff)),_0x4bc88f=_0x119a4e['getContext']('2d');_0x119a4e[_0x4a7123('0x1e1')]=_0x4a7123(0x24a),_0x119a4e[_0x4a7123(0x231)][_0x4a7123(0x2a4)]=_0x4a7123(0x1f9),_0x119a4e['style'][_0x4a7123(0x1e3)]='0',_0x119a4e[_0x4a7123(0x231)][_0x4a7123(0x1f4)]='0',_0x119a4e[_0x4a7123('0x231')][_0x4a7123('0x2d0')]=_0x4a7123('0x2b5'),_0x119a4e[_0x4a7123('0x231')][_0x4a7123('0x262')]='10';const _0x78524c=_0x494bc5[_0x4a7123(0x1dc)]();_0x119a4e[_0x4a7123('0x2d3')]=_0x78524c[_0x4a7123(0x2d3)],_0x119a4e[_0x4a7123('0x230')]=_0x78524c['height'],_0x119a4e[_0x4a7123('0x231')]['width']=_0x78524c[_0x4a7123('0x2d3')]+'px',_0x119a4e[_0x4a7123('0x231')][_0x4a7123(0x230)]=_0x78524c[_0x4a7123(0x230)]+'px',_0x4bc88f['fillStyle']=_0x4a7123(0x240),_0x4bc88f[_0x4a7123(0x2d6)](-0x20c1*-0x1+-0x1*0x11f4+-0xecd,-0xb57+0x1*-0xd55+0x18ac,_0x119a4e[_0x4a7123('0x2d3')],_0x119a4e[_0x4a7123('0x230')]),this[_0x4a7123(0x2ad)](_0x4bc88f,_0x119a4e[_0x4a7123('0x2d3')],_0x119a4e['height']),_0x4bc88f['fillStyle']=_0x4a7123(0x29f),_0x4bc88f[_0x4a7123('0x250')]=_0x4a7123(0x2d5),_0x4bc88f[_0x4a7123('0x247')]=_0x4a7123(0x20c),_0x4bc88f[_0x4a7123(0x1f5)](_0x4a7123(0x26b),_0x119a4e[_0x4a7123('0x2d3')]/(-0xb3e*-0x1+0xe3f+-0x197b),_0x119a4e[_0x4a7123(0x230)]/(-0x12e*-0x16+-0x361*-0x5+-0x2ad7)),_0x494bc5[_0x4a7123('0x267')](_0x119a4e),this[_0x4a7123('0x219')]=_0x119a4e,this['mainCtx']=_0x4bc88f,this[_0x4a7123('0x2b6')]();}['drawScratchPattern'](_0x3d9b6b,_0x44ebfc,_0x555955){const _0xb0ce61=_0x4ffb85;_0x3d9b6b[_0xb0ce61('0x254')]=_0xb0ce61(0x25d),_0x3d9b6b[_0xb0ce61(0x1e5)]=0x4*0xeb+0x5b3*0x1+-0x958;for(let _0x132e24=0x62*0x23+0x1078+-0x2*0xeef;_0x132e24<_0x44ebfc+_0x555955;_0x132e24+=-0x124f*-0x1+-0x100*-0x16+-0x1*0x2845){if(_0xb0ce61(0x245)!==_0xb0ce61(0x245)){const _0xb90fd3=this[_0xb0ce61('0x219')][_0xb0ce61('0x1dc')]();let _0x50b6de,_0x3dcd72;return _0x39bb5a===_0xb0ce61('0x2b9')?(_0x50b6de=_0x5e7bb0[_0xb0ce61(0x25a)]-_0xb90fd3[_0xb0ce61('0x1f4')],_0x3dcd72=_0x5c465f['clientY']-_0xb90fd3[_0xb0ce61(0x1e3)]):(_0x50b6de=_0x174ab8[_0xb0ce61('0x25a')]-_0xb90fd3[_0xb0ce61(0x1f4)],_0x3dcd72=_0x3314bc[_0xb0ce61('0x21d')]-_0xb90fd3[_0xb0ce61(0x1e3)]),_0x50b6de=_0x50b6de*(this['mainCanvas'][_0xb0ce61('0x2d3')]/_0xb90fd3[_0xb0ce61(0x2d3)]),_0x3dcd72=_0x3dcd72*(this[_0xb0ce61(0x219)][_0xb0ce61('0x230')]/_0xb90fd3['height']),this[_0xb0ce61(0x2c3)]['globalCompositeOperation']=_0xb0ce61(0x2ae),this[_0xb0ce61(0x2c3)]['beginPath'](),this[_0xb0ce61('0x2c3')]['arc'](_0x50b6de,_0x3dcd72,this[_0xb0ce61('0x2b0')],0x1325+0x2a*-0x21+-0xdbb,(-0x274*0x4+0x31d*0x5+-0x5bf)*_0x401bf4['PI']),this['mainCtx']['fill'](),_0x158e86['PI']*this[_0xb0ce61(0x2b0)]*this[_0xb0ce61('0x2b0')];}else _0x3d9b6b[_0xb0ce61('0x255')](),_0x3d9b6b[_0xb0ce61('0x1fe')](_0x132e24,-0x1*-0x1de9+0x75*0x4b+0x4f*-0xd0),_0x3d9b6b[_0xb0ce61('0x1e8')](_0x132e24-_0x555955,_0x555955),_0x3d9b6b[_0xb0ce61(0x2c5)]();}}[_0x4ffb85('0x2b6')](){const _0x5f3ccb=_0x4ffb85;let _0x5b9780=![],_0x5a3d85=0x1*0x155f+-0x214+-0x134b;const _0x4fbe43=this[_0x5f3ccb(0x219)][_0x5f3ccb('0x2d3')]*this['mainCanvas'][_0x5f3ccb(0x230)];this[_0x5f3ccb('0x219')]['addEventListener']('mousedown',_0x1bdad0=>{const _0x3d869c=_0x5f3ccb;if(_0x3d869c('0x25e')!==_0x3d869c(0x26c))!this['gameStarted']&&this[_0x3d869c(0x291)](),_0x5b9780=!![],this[_0x3d869c(0x1d5)](_0x1bdad0,_0x3d869c(0x2b9));else{_0x3c7aa2[_0x3d869c(0x251)](_0x3d869c(0x2a7),_0x11a0b7),this[_0x3d869c(0x21a)](_0x3d869c(0x2bb)),this[_0x3d869c('0x265')]();const _0x39554c={};_0x39554c['erro']=_0x886511[_0x3d869c('0x237')],_0x38c920('erro_desconto',_0x39554c);}}),this[_0x5f3ccb('0x219')]['addEventListener'](_0x5f3ccb(0x24f),_0x16d7ff=>{const _0x11f2bd=_0x5f3ccb;_0x5b9780&&(_0x5a3d85+=this['scratch'](_0x16d7ff,_0x11f2bd('0x2b9')),this['checkMainScratchProgress'](_0x5a3d85,_0x4fbe43));}),this[_0x5f3ccb('0x219')][_0x5f3ccb(0x1ee)](_0x5f3ccb('0x203'),()=>{_0x5b9780=![];}),this['mainCanvas'][_0x5f3ccb('0x1ee')](_0x5f3ccb('0x1e6'),_0x58ad77=>{const _0x5e3de2=_0x5f3ccb;_0x5e3de2('0x26e')!=='jFako'?this[_0x5e3de2(0x21e)]='0.00':(_0x58ad77[_0x5e3de2(0x236)](),!this[_0x5e3de2('0x296')]&&this['startGame'](),_0x5b9780=!![],this[_0x5e3de2('0x1d5')](_0x58ad77[_0x5e3de2(0x2c8)][-0x185*-0x13+0x1d08+0x51*-0xb7],'touch'));}),this[_0x5f3ccb('0x219')][_0x5f3ccb('0x1ee')](_0x5f3ccb(0x1dd),_0x19866b=>{const _0x1d29e7=_0x5f3ccb;_0x19866b[_0x1d29e7('0x236')](),_0x5b9780&&(_0x1d29e7(0x1fd)!==_0x1d29e7('0x1fd')?(_0x847fff+=this['scratch'](_0x48571d,'mouse'),this[_0x1d29e7('0x212')](_0x255ddf,_0x432474)):(_0x5a3d85+=this[_0x1d29e7('0x1d5')](_0x19866b[_0x1d29e7('0x2c8')][-0x241*-0x3+0x184b+-0x1f0e],_0x1d29e7(0x1f3)),this['checkMainScratchProgress'](_0x5a3d85,_0x4fbe43)));}),this[_0x5f3ccb(0x219)][_0x5f3ccb('0x1ee')](_0x5f3ccb(0x233),_0x461fd1=>{const _0x1ea64f=_0x5f3ccb;_0x461fd1[_0x1ea64f('0x236')](),_0x5b9780=![];});}[_0x4ffb85('0x291')](){const _0x3977e1=_0x4ffb85;this[_0x3977e1('0x296')]=!![],this[_0x3977e1('0x1f0')]();}['deductBalance'](){const _0x31f80f=_0x4ffb85,_0x1bd748={};_0x1bd748[_0x31f80f(0x246)]=this[_0x31f80f(0x2b4)],enviarWebhook(_0x31f80f(0x28f),_0x1bd748);const _0x589a63={};_0x589a63[_0x31f80f('0x268')]='application/json';const _0x597abf={};_0x597abf[_0x31f80f(0x2ca)]=this[_0x31f80f('0x2b4')],fetch(_0x31f80f('0x2b2'),{'method':'POST','headers':_0x589a63,'body':JSON['stringify'](_0x597abf)})[_0x31f80f(0x241)](_0x18c26a=>{const _0x2307d3=_0x31f80f;if(_0x2307d3('0x1df')===_0x2307d3('0x1ed')){const _0x1e241e=_0x22f798[_0x2307d3('0x297')](_0x363124[_0x2307d3('0x1f8')]()*(0x2698+-0x5b5*0x2+-0x1b25));!_0x48dfe3[_0x2307d3('0x263')](_0x1e241e)&&_0x11889e['push'](_0x1e241e);}else{if(!_0x18c26a['ok']){if(_0x2307d3(0x1d3)!==_0x2307d3('0x1d3')){if(_0x32ac0d[_0x2307d3('0x2cc')]){this[_0x2307d3(0x215)](_0x138919[_0x2307d3('0x2cc')]);const _0x4e6e12={};_0x4e6e12[_0x2307d3('0x2cc')]=_0x2a649f[_0x2307d3('0x2cc')],_0x403756('saldo_atualizado',_0x4e6e12);}}else throw new Error(_0x2307d3(0x293)+_0x18c26a['status']);}return _0x18c26a[_0x2307d3(0x227)]();}})[_0x31f80f(0x241)](_0x26a22b=>{const _0x6e4c88=_0x31f80f;if(_0x26a22b[_0x6e4c88('0x24d')]){if(_0x6e4c88(0x1ea)==='gCNSa'){_0x26a22b[_0x6e4c88(0x2cc)]&&this[_0x6e4c88('0x215')](_0x26a22b['saldo']);const _0x19c579={};_0x19c579[_0x6e4c88('0x1ec')]=_0x26a22b[_0x6e4c88(0x2cc)],enviarWebhook('saldo_descontado',_0x19c579);}else!this[_0x6e4c88(0x296)]&&this['startGame'](),_0x3839d1=!![],this[_0x6e4c88('0x1d5')](_0x484602,_0x6e4c88('0x2b9'));}else{if(_0x26a22b[_0x6e4c88(0x2c2)]){console['error'](_0x6e4c88('0x1f6'),_0x26a22b[_0x6e4c88(0x2c2)]),this[_0x6e4c88('0x21a')]('Erro:\x20'+_0x26a22b[_0x6e4c88(0x2c2)]),this[_0x6e4c88(0x265)]();const _0x5642a0={};_0x5642a0[_0x6e4c88(0x2c2)]=_0x26a22b[_0x6e4c88('0x2c2')],enviarWebhook(_0x6e4c88(0x22e),_0x5642a0);}}})[_0x31f80f(0x23c)](_0x3709d4=>{const _0xc9b60d=_0x31f80f;console['error'](_0xc9b60d(0x2a7),_0x3709d4),this[_0xc9b60d(0x21a)](_0xc9b60d('0x2bb')),this['blockGame']();const _0x2c0a21={};_0x2c0a21[_0xc9b60d(0x2c2)]=_0x3709d4[_0xc9b60d(0x237)],enviarWebhook(_0xc9b60d(0x22e),_0x2c0a21);});}[_0x4ffb85(0x265)](){const _0x306c2c=_0x4ffb85;this[_0x306c2c(0x219)][_0x306c2c(0x231)][_0x306c2c('0x209')]=_0x306c2c(0x217),this['mainCanvas'][_0x306c2c('0x231')][_0x306c2c(0x266)]=_0x306c2c(0x27b);}[_0x4ffb85(0x1d5)](_0x2efcb1,_0x2380ed){const _0x553600=_0x4ffb85,_0x593f0c=this[_0x553600(0x219)][_0x553600('0x1dc')]();let _0x338a9e,_0x5bd72f;if(_0x2380ed===_0x553600('0x2b9')){if('FaYak'==='Qvhzr'){if(_0x59a704[_0x553600('0x226')](this[_0x553600('0x222')])[_0x553600('0x263')](_0x5d0e73)){const _0x519f59=_0x387007['createElement'](_0x553600(0x20d));_0x519f59[_0x553600('0x2d1')]=this[_0x553600('0x222')][_0x301730],_0x519f59[_0x553600('0x2a9')]=_0x553600(0x208)+_0x169b83,_0x526904[_0x553600('0x23d')]='',_0x2ec54b[_0x553600('0x267')](_0x519f59),_0x34f7cf['classList'][_0x553600(0x216)](_0x553600(0x2cd));}_0x2dc73f[_0x553600(0x231)][_0x553600(0x2b3)]=_0x553600('0x270'),_0x3acadd(()=>{const _0x36339c=_0x553600;_0x38c780[_0x36339c(0x231)][_0x36339c(0x2b3)]=_0x36339c(0x201);},-0x2*-0x133c+-0x1d37+-0x879);}else _0x338a9e=_0x2efcb1[_0x553600(0x25a)]-_0x593f0c[_0x553600(0x1f4)],_0x5bd72f=_0x2efcb1[_0x553600('0x21d')]-_0x593f0c[_0x553600('0x1e3')];}else{if(_0x553600(0x220)===_0x553600(0x205)){this[_0x553600(0x234)][_0x553600(0x238)]=_0x553600(0x260)+this['winningPrize'][_0x553600(0x25c)]('.',',')+_0x553600('0x27a'),this['messageElement'][_0x553600('0x231')]['color']=_0x553600('0x258');const _0x2e17a4={};_0x2e17a4[_0x553600(0x284)]=this[_0x553600('0x21e')],_0x2e17a4[_0x553600('0x27e')]=this[_0x553600('0x2d7')],_0x3631b2(_0x553600('0x2cf'),_0x2e17a4);}else _0x338a9e=_0x2efcb1['clientX']-_0x593f0c[_0x553600(0x1f4)],_0x5bd72f=_0x2efcb1[_0x553600('0x21d')]-_0x593f0c[_0x553600(0x1e3)];}return _0x338a9e=_0x338a9e*(this[_0x553600('0x219')][_0x553600('0x2d3')]/_0x593f0c[_0x553600(0x2d3)]),_0x5bd72f=_0x5bd72f*(this['mainCanvas'][_0x553600('0x230')]/_0x593f0c[_0x553600('0x230')]),this[_0x553600(0x2c3)][_0x553600(0x1e9)]=_0x553600(0x2ae),this['mainCtx'][_0x553600('0x255')](),this['mainCtx'][_0x553600(0x27d)](_0x338a9e,_0x5bd72f,this[_0x553600(0x2b0)],0x1466+0xd*0x71+-0x1*0x1a23,(-0x235c+-0x21d+0x65*0x5f)*Math['PI']),this['mainCtx'][_0x553600(0x2bf)](),Math['PI']*this[_0x553600(0x2b0)]*this[_0x553600('0x2b0')];}[_0x4ffb85('0x212')](_0x3808f4,_0x211be5){const _0x41fa5b=_0x4ffb85,_0xf4c935=_0x3808f4/_0x211be5;if(_0xf4c935>=this[_0x41fa5b('0x232')]&&!this['isMainScratched']){if(_0x41fa5b('0x21c')!==_0x41fa5b(0x21c)){_0x2441ad[_0x41fa5b('0x2cc')]&&this['updateBalance'](_0xfd273b[_0x41fa5b('0x2cc')]);const _0x4b9310={};_0x4b9310[_0x41fa5b(0x1ec)]=_0x1a7b2e[_0x41fa5b('0x2cc')],_0x5e834f(_0x41fa5b(0x29e),_0x4b9310);}else{this[_0x41fa5b('0x23f')]=!![],this['revealMainArea']();const _0x3f4b4f={};_0x3f4b4f[_0x41fa5b(0x286)]=_0xf4c935,enviarWebhook(_0x41fa5b('0x23e'),_0x3f4b4f);}}}[_0x4ffb85('0x28e')](){const _0x23571d=_0x4ffb85;this[_0x23571d('0x219')][_0x23571d('0x231')][_0x23571d(0x266)]='0',setTimeout(()=>{const _0x4c69cd=_0x23571d;if(_0x4c69cd(0x242)!=='Bgirb'){_0x703986[_0x4c69cd(0x251)]('Erro\x20do\x20servidor:',_0xfd48f8[_0x4c69cd(0x2c2)]),this['showErrorMessage']('Erro:\x20'+_0xaa098['erro']),this[_0x4c69cd('0x265')]();const _0x518431={};_0x518431[_0x4c69cd(0x2c2)]=_0x38ddde[_0x4c69cd(0x2c2)],_0x3271bc(_0x4c69cd(0x22e),_0x518431);}else this['mainScratchContainer'][_0x4c69cd('0x231')][_0x4c69cd(0x2b1)]=_0x4c69cd(0x217),this['scratchGrid'][_0x4c69cd(0x288)][_0x4c69cd(0x281)]('hidden'),this[_0x4c69cd(0x2b8)][_0x4c69cd('0x288')][_0x4c69cd(0x216)]('visible'),this[_0x4c69cd('0x25b')]();},-0x14de*0x1+0x1a65+0x131*-0x3);}[_0x4ffb85(0x25b)](){const _0x10572a=_0x4ffb85;this[_0x10572a(0x24c)][_0x10572a(0x2a2)]((_0x47ac5f,_0x154c7b)=>{const _0x496ce8=_0x10572a;if(_0x496ce8('0x1f2')===_0x496ce8('0x1f2')){const _0x13c104=this['gameResults'][_0x154c7b];setTimeout(()=>{const _0x37ca1a=_0x496ce8;if(Object[_0x37ca1a('0x226')](this[_0x37ca1a(0x222)])[_0x37ca1a(0x263)](_0x13c104)){const _0xe29f2d=document[_0x37ca1a(0x285)](_0x37ca1a(0x20d));_0xe29f2d[_0x37ca1a('0x2d1')]=this[_0x37ca1a(0x222)][_0x13c104],_0xe29f2d[_0x37ca1a('0x2a9')]=_0x37ca1a('0x208')+_0x13c104,_0x47ac5f['innerHTML']='',_0x47ac5f[_0x37ca1a(0x267)](_0xe29f2d),_0x47ac5f['classList'][_0x37ca1a('0x216')](_0x37ca1a('0x2cd'));}_0x47ac5f[_0x37ca1a('0x231')][_0x37ca1a('0x2b3')]=_0x37ca1a('0x270'),setTimeout(()=>{const _0x305445=_0x37ca1a;if(_0x305445(0x22c)!==_0x305445(0x206))_0x47ac5f[_0x305445('0x231')][_0x305445(0x2b3)]=_0x305445('0x201');else{const _0x43d2b3=this[_0x305445(0x1fa)][_0x2fa437];_0x3631f8(()=>{const _0x1b7a66=_0x305445;if(_0x46c962['keys'](this[_0x1b7a66(0x222)])[_0x1b7a66(0x263)](_0x43d2b3)){const _0x342459=_0x4f524e[_0x1b7a66('0x285')](_0x1b7a66('0x20d'));_0x342459[_0x1b7a66('0x2d1')]=this[_0x1b7a66('0x222')][_0x43d2b3],_0x342459['alt']=_0x1b7a66(0x208)+_0x43d2b3,_0x532bc5['innerHTML']='',_0x5e4605[_0x1b7a66(0x267)](_0x342459),_0x4781a2['classList']['add'](_0x1b7a66(0x2cd));}_0x2a6942['style']['transform']='scale(1.1)',_0x40c26b(()=>{const _0x81c285=_0x1b7a66;_0x23c05e[_0x81c285('0x231')]['transform']='scale(1)';},-0xa7*-0x1d+0x12e5+-0x2508);},_0xb6f342*(0x1*0x1f1f+-0x3d1*0x9+0x3d0));}},-0x17*0xb4+-0x2330+0x3424);},_0x154c7b*(-0x1072+-0x7*-0x15+0x1075));}else{this[_0x496ce8(0x2cb)]=_0x586dc4[_0x496ce8(0x276)](_0x496ce8('0x282')),this['scratchGrid']=_0x402866[_0x496ce8('0x276')](_0x496ce8('0x1d4')),this[_0x496ce8('0x24c')]=_0x6a7f9f[_0x496ce8('0x1d6')](_0x496ce8(0x221)),this[_0x496ce8('0x234')]=_0x32ed16[_0x496ce8('0x276')]('.message'),this[_0x496ce8(0x1e0)]=_0x2b3d9d['querySelector']('.play-again-button'),this['balanceButton']=_0x254e00['querySelector'](_0x496ce8(0x28c)),this[_0x496ce8(0x1fa)]=[],this[_0x496ce8('0x25f')]=![],this[_0x496ce8('0x21e')]=null,this[_0x496ce8(0x2d7)]=null,this[_0x496ce8(0x23f)]=![],this[_0x496ce8(0x296)]=![];const _0x135f6f=new _0xd51682(_0x139e8d[_0x496ce8('0x2a8')]['search']);this[_0x496ce8(0x2b4)]=_0x4075e9(_0x135f6f['get'](_0x496ce8('0x246')))||-0xb71+-0x17f1+-0x1*-0x2363,this[_0x496ce8(0x2b0)]=0x229*0x7+-0xae+-0xe58,this[_0x496ce8('0x232')]=-0x1*0x24be+0x1*-0x22d+0x26eb+0.8;const _0x3648a5={};_0x3648a5['2']=_0x496ce8(0x1db),_0x3648a5['3']=_0x496ce8('0x1e4'),_0x3648a5['5']=_0x496ce8(0x20b),_0x3648a5['10']=_0x496ce8('0x269'),_0x3648a5['50']=_0x496ce8('0x274'),this[_0x496ce8(0x222)]=_0x3648a5,this[_0x496ce8('0x1ef')]();const _0xcbeab4={};_0xcbeab4[_0x496ce8('0x2b4')]=this['valorAposta'],_0x3e1352(_0x496ce8(0x229),_0xcbeab4);}}),setTimeout(()=>{this['showFinalResult']();},(0x2b*-0x6d+0x5c6*0x3+0x106)*(-0x6*0x1ac+-0x5*-0x619+-0x13df*0x1)+(-0xaf4+-0x9*-0x8d+0x5*0x197));}[_0x4ffb85(0x275)](){const _0x34ae72=_0x4ffb85;this['playAgainButton'][_0x34ae72(0x1ee)](_0x34ae72(0x228),()=>this[_0x34ae72(0x200)]());}[_0x4ffb85('0x244')](){const _0x2230df=_0x4ffb85,_0x32d7c9=['2','3','5','10','50'];this[_0x2230df('0x1fa')]=[],this[_0x2230df('0x25f')]=![],this[_0x2230df('0x21e')]=null,this[_0x2230df('0x2d7')]=null;const _0x5afdae=resultadoDaRaspadinha===!![];if(_0x5afdae){if(_0x2230df('0x2c1')!==_0x2230df('0x26f')){const _0x3d5b1e=_0x32d7c9[Math['floor'](Math['random']()*_0x32d7c9[_0x2230df('0x27c')])];this['winningNote']=_0x3d5b1e,this['hasWinner']=!![];const _0x4d5784=parseInt(_0x3d5b1e);this[_0x2230df(0x21e)]='R$\x20'+(_0x4d5784*(0x15c9*-0x1+-0x206b+0x3637))[_0x2230df('0x257')](0x7*0x3cd+0x54*0x5a+-0x3821)[_0x2230df(0x25c)]('.',',');const _0xebdbe5=[];while(_0xebdbe5[_0x2230df(0x27c)]<-0x4b6*-0x2+0xf6*0x22+-0x2a15){const _0x19be5d=Math[_0x2230df(0x297)](Math[_0x2230df('0x1f8')]()*(0x17d7+-0x1068+-0x1*0x766));!_0xebdbe5['includes'](_0x19be5d)&&_0xebdbe5[_0x2230df(0x273)](_0x19be5d);}for(let _0x22068a=0x1c*-0x9e+-0x1f*0x1f+0x1509;_0x22068a<0x56*0x5d+0x798+0x387*-0xb;_0x22068a++){_0xebdbe5[_0x2230df(0x263)](_0x22068a)?this[_0x2230df(0x1fa)]['push'](_0x3d5b1e):this['gameResults'][_0x2230df(0x273)](_0x2230df(0x20f));}this[_0x2230df('0x210')](_0x3d5b1e,_0xebdbe5);}else this[_0x2230df('0x2c4')]();}else{for(let _0x147244=0xc6*0x2+-0x4cc*0x7+0x2008;_0x147244<0x1*-0x18e5+0x2ed+0x1601;_0x147244++){if(_0x2230df('0x1d7')!==_0x2230df('0x1f1')){let _0x13d613=_0x32d7c9[Math[_0x2230df(0x297)](Math['random']()*_0x32d7c9[_0x2230df(0x27c)])];this[_0x2230df(0x1fa)][_0x2230df(0x273)](_0x13d613);}else this[_0x2230df(0x291)]();}this['ensureNoThreeIdenticalOnlyNotes']();}const _0x37b461={};_0x37b461['temVencedor']=_0x5afdae,_0x37b461[_0x2230df(0x27e)]=_0x5afdae?this[_0x2230df('0x2d7')]:null,enviarWebhook('resultados_gerados',_0x37b461);}[_0x4ffb85(0x210)](_0x558825,_0xdf7190){const _0x33b8f8=_0x4ffb85,_0x21f5c1=['2','3','5','10','50'],_0x2e7519=_0x21f5c1[_0x33b8f8(0x23a)](_0x3a4136=>_0x3a4136!==_0x558825),_0x3a895f={};_0x2e7519[_0x33b8f8('0x2a2')](_0x6c4c54=>_0x3a895f[_0x6c4c54]=0x109e+0x116e*-0x2+0x123e);for(let _0x2de9b9=0x1*0x2af+-0x2493+-0x21e4*-0x1;_0x2de9b9<-0x1*0x2554+0x50*-0x50+0x1*0x3e5d;_0x2de9b9++){if(!_0xdf7190[_0x33b8f8(0x263)](_0x2de9b9)){const _0x2b79a8=_0x2e7519[_0x33b8f8(0x23a)](_0x112b94=>_0x3a895f[_0x112b94]<0x22a9+-0x27*-0xf8+0x15*-0x373);if(_0x2b79a8[_0x33b8f8(0x27c)]>0x8b5+0x17c8+-0x207d){if('cdLwt'!=='cdLwt'){const _0x3f9f9a=_0x179497[_0x33b8f8('0x285')](_0x33b8f8('0x20d'));_0x3f9f9a[_0x33b8f8('0x2d1')]=this[_0x33b8f8(0x222)][_0x2613d9],_0x3f9f9a[_0x33b8f8('0x2a9')]=_0x33b8f8(0x208)+_0x1697fb,_0x3ef66d[_0x33b8f8('0x23d')]='',_0x2750e2['appendChild'](_0x3f9f9a),_0x2e5813[_0x33b8f8('0x288')][_0x33b8f8('0x216')](_0x33b8f8('0x2cd'));}else{const _0x2304d1=_0x2b79a8[Math[_0x33b8f8(0x297)](Math['random']()*_0x2b79a8[_0x33b8f8('0x27c')])];this['gameResults'][_0x2de9b9]=_0x2304d1,_0x3a895f[_0x2304d1]++;}}else{if('zGEcd'===_0x33b8f8(0x294))this['messageElement'][_0x33b8f8(0x238)]=_0x33b8f8('0x24b'),this[_0x33b8f8('0x234')][_0x33b8f8('0x231')][_0x33b8f8(0x1eb)]=_0x33b8f8('0x2a1'),_0x554a76(_0x33b8f8('0x2d2'),{});else{const _0x42f53a=_0x2e7519[Math[_0x33b8f8('0x297')](Math[_0x33b8f8(0x1f8)]()*_0x2e7519[_0x33b8f8(0x27c)])];this[_0x33b8f8('0x1fa')][_0x2de9b9]=_0x42f53a;}}}}}['ensureNoThreeIdenticalOnlyNotes'](){const _0x34e7de=_0x4ffb85;let _0xf3efd1=!![];const _0x4e317a=['2','3','5','10','50'];while(_0xf3efd1){_0xf3efd1=![];const _0x4aff18={};for(const _0x2276d1 of this['gameResults']){_0x4aff18[_0x2276d1]=(_0x4aff18[_0x2276d1]||0x1e7f*0x1+0x150a+-0x3389)+(-0x1*-0xcd1+-0x7ad*-0x3+-0x23d7);if(_0x4aff18[_0x2276d1]>=0x4*-0x3a3+-0x30c+0x1*0x119b){if(_0x34e7de('0x243')!==_0x34e7de(0x243))_0x517d10[_0x34e7de('0x236')](),!this[_0x34e7de('0x296')]&&this['startGame'](),_0x10073e=!![],this[_0x34e7de('0x1d5')](_0x3abeb8[_0x34e7de(0x2c8)][-0x563*-0x1+0x2063+0x5*-0x78e],_0x34e7de(0x1f3));else{_0xf3efd1=!![];const _0x359d46=this['gameResults']['lastIndexOf'](_0x2276d1);let _0x7b3dbe=_0x4e317a[Math['floor'](Math[_0x34e7de('0x1f8')]()*_0x4e317a[_0x34e7de('0x27c')])];while(_0x7b3dbe===_0x2276d1){_0x7b3dbe=_0x4e317a[Math[_0x34e7de('0x297')](Math[_0x34e7de('0x1f8')]()*_0x4e317a[_0x34e7de(0x27c)])];}this['gameResults'][_0x359d46]=_0x7b3dbe;break;}}}}}[_0x4ffb85(0x29d)](){const _0x3c75b4=_0x4ffb85,_0x2824e1={};for(const _0x396ec5 of this[_0x3c75b4('0x1fa')]){if(_0x3c75b4(0x1d8)===_0x3c75b4(0x202)){const _0x2e8f5d=this[_0x3c75b4(0x2cb)],_0x405546=_0x57d42f['createElement'](_0x3c75b4(0x1ff)),_0x3fa838=_0x405546[_0x3c75b4('0x264')]('2d');_0x405546['className']='scratch-canvas',_0x405546[_0x3c75b4('0x231')]['position']=_0x3c75b4('0x1f9'),_0x405546['style'][_0x3c75b4('0x1e3')]='0',_0x405546[_0x3c75b4(0x231)][_0x3c75b4('0x1f4')]='0',_0x405546[_0x3c75b4(0x231)][_0x3c75b4('0x2d0')]='crosshair',_0x405546['style']['zIndex']='10';const _0x3ff2d5=_0x2e8f5d[_0x3c75b4(0x1dc)]();_0x405546[_0x3c75b4(0x2d3)]=_0x3ff2d5[_0x3c75b4(0x2d3)],_0x405546[_0x3c75b4('0x230')]=_0x3ff2d5['height'],_0x405546[_0x3c75b4('0x231')][_0x3c75b4('0x2d3')]=_0x3ff2d5[_0x3c75b4('0x2d3')]+'px',_0x405546['style'][_0x3c75b4('0x230')]=_0x3ff2d5[_0x3c75b4('0x230')]+'px',_0x3fa838[_0x3c75b4(0x29a)]=_0x3c75b4('0x240'),_0x3fa838[_0x3c75b4('0x2d6')](0x1fff+-0x424+-0x949*0x3,0x2*-0x566+-0x1cd+0xc99,_0x405546['width'],_0x405546[_0x3c75b4('0x230')]),this[_0x3c75b4('0x2ad')](_0x3fa838,_0x405546[_0x3c75b4('0x2d3')],_0x405546[_0x3c75b4(0x230)]),_0x3fa838[_0x3c75b4('0x29a')]='white',_0x3fa838['font']=_0x3c75b4(0x2d5),_0x3fa838['textAlign']='center',_0x3fa838[_0x3c75b4(0x1f5)](_0x3c75b4(0x26b),_0x405546[_0x3c75b4(0x2d3)]/(-0x3fb*0x2+-0x1e89+0x2681*0x1),_0x405546[_0x3c75b4(0x230)]/(-0x6*-0x64+-0x16*0xd+0x1a*-0xc)),_0x2e8f5d['appendChild'](_0x405546),this[_0x3c75b4('0x219')]=_0x405546,this[_0x3c75b4(0x2c3)]=_0x3fa838,this[_0x3c75b4('0x2b6')]();}else{_0x2824e1[_0x396ec5]=(_0x2824e1[_0x396ec5]||-0x1eb8+-0x1a3b+-0x1*-0x38f3)+(-0x1619*0x1+0x1f*0x7d+0x6f7);if(_0x2824e1[_0x396ec5]>=0x232d+0x1bb8+-0x3ee2){this['hasWinner']=!![],this[_0x3c75b4(0x2d7)]=_0x396ec5;if(Object[_0x3c75b4('0x226')](this[_0x3c75b4(0x222)])[_0x3c75b4(0x263)](_0x396ec5)){if('tYONr'===_0x3c75b4('0x1fc'))_0xff3e52['preventDefault'](),_0x5265f9=![];else{const _0x3cbd2c=parseInt(_0x396ec5);this['winningPrize']=(_0x3cbd2c*(-0x14c3+-0x2f3*-0x3+0xbed))[_0x3c75b4(0x257)](0x1*-0x1fb+-0x10dd*0x1+0x12da);}}else _0x3c75b4(0x280)!=='iYCVw'?this[_0x3c75b4('0x215')](_0x2ed43d['saldo']):this[_0x3c75b4('0x21e')]='0.00';return;}}}this[_0x3c75b4('0x25f')]=![];}['showFinalResult'](){const _0x42f56a=_0x4ffb85;this[_0x42f56a('0x29d')]();if(this[_0x42f56a('0x25f')]){this[_0x42f56a(0x234)][_0x42f56a('0x238')]=_0x42f56a(0x260)+this['winningPrize']['replace']('.',',')+_0x42f56a('0x27a'),this[_0x42f56a(0x234)][_0x42f56a('0x231')][_0x42f56a(0x1eb)]=_0x42f56a('0x258');const _0x26f4ac={};_0x26f4ac[_0x42f56a(0x284)]=this[_0x42f56a(0x21e)],_0x26f4ac[_0x42f56a('0x27e')]=this[_0x42f56a('0x2d7')],enviarWebhook('jogador_ganhou',_0x26f4ac);}else this[_0x42f56a('0x234')][_0x42f56a('0x238')]=_0x42f56a(0x24b),this[_0x42f56a(0x234)][_0x42f56a('0x231')][_0x42f56a(0x1eb)]=_0x42f56a(0x2a1),enviarWebhook(_0x42f56a(0x2d2),{});this[_0x42f56a(0x1e0)][_0x42f56a('0x288')][_0x42f56a(0x216)](_0x42f56a(0x1d9)),this[_0x42f56a(0x1e2)](this['hasWinner'],parseFloat(this[_0x42f56a('0x21e')]));}['resetGame'](){const _0x5f3add=_0x4ffb85;enviarWebhook(_0x5f3add(0x2c7),{}),this['hasWinner']=![],this[_0x5f3add(0x21e)]=null,this[_0x5f3add('0x2d7')]=null,this[_0x5f3add(0x23f)]=![],this[_0x5f3add(0x296)]=![];const _0x147a9f=document['querySelectorAll']('.scratch-canvas,\x20.individual-scratch-canvas');_0x147a9f[_0x5f3add(0x2a2)](_0x5afe91=>_0x5afe91[_0x5f3add('0x281')]()),this[_0x5f3add(0x2cb)][_0x5f3add('0x231')][_0x5f3add('0x2b1')]=_0x5f3add('0x1d1'),this[_0x5f3add('0x2cb')][_0x5f3add(0x231)]['pointerEvents']=_0x5f3add(0x289),this['mainScratchContainer'][_0x5f3add('0x231')][_0x5f3add(0x266)]='1',this['scratchGrid'][_0x5f3add('0x288')][_0x5f3add('0x216')](_0x5f3add('0x28a')),this[_0x5f3add('0x2b8')][_0x5f3add('0x288')][_0x5f3add(0x281)](_0x5f3add(0x1d9)),this['scratchAreas']['forEach'](_0x3d7a1c=>{const _0x1618fc=_0x5f3add;_0x1618fc(0x207)===_0x1618fc(0x26d)?this[_0x1618fc(0x2a5)][_0x1618fc('0x238')]=_0x1618fc('0x235')+_0x14669c:(_0x3d7a1c[_0x1618fc(0x288)][_0x1618fc(0x281)](_0x1618fc(0x248),_0x1618fc('0x2cd'),'nothing'),_0x3d7a1c[_0x1618fc(0x23d)]=_0x1618fc(0x26b),_0x3d7a1c[_0x1618fc('0x231')]['transform']=_0x1618fc(0x201),_0x3d7a1c[_0x1618fc('0x231')][_0x1618fc('0x2a4')]=_0x1618fc('0x259'));}),this['messageElement']['textContent']='',this[_0x5f3add('0x234')][_0x5f3add('0x231')][_0x5f3add(0x1eb)]='white',this[_0x5f3add(0x1e0)]['classList']['remove'](_0x5f3add('0x1d9')),this[_0x5f3add('0x244')](),this['createMainScratchCanvas']();}[_0x4ffb85(0x1e2)](_0x5c39ba,_0x5e90d5){const _0x47942a=_0x4ffb85,_0x1da473={};_0x1da473['ganhou']=_0x5c39ba,_0x1da473['premio']=_0x5e90d5,enviarWebhook(_0x47942a(0x256),_0x1da473);const _0x435384={};_0x435384[_0x47942a('0x268')]=_0x47942a('0x2ac');const _0x266119={};_0x266119[_0x47942a(0x2d8)]=_0x5c39ba,_0x266119[_0x47942a(0x284)]=_0x5e90d5,_0x266119[_0x47942a('0x2ca')]=this[_0x47942a('0x2b4')],fetch(_0x47942a('0x29b'),{'method':_0x47942a('0x277'),'headers':_0x435384,'body':JSON[_0x47942a(0x2aa)](_0x266119)})[_0x47942a('0x241')](_0x37f093=>{const _0x239cad=_0x47942a;if(!_0x37f093['ok'])throw new Error(_0x239cad(0x293)+_0x37f093[_0x239cad(0x29c)]);return _0x37f093['json']();})[_0x47942a('0x241')](_0x4dc968=>{const _0x17ff05=_0x47942a;if(_0x17ff05(0x252)===_0x17ff05('0x252')){if(_0x4dc968['sucesso']){_0x4dc968['saldo']&&this[_0x17ff05(0x215)](_0x4dc968[_0x17ff05('0x2cc')]);if(_0x4dc968[_0x17ff05(0x2d8)]&&_0x4dc968[_0x17ff05(0x284)]>0x107+-0x227f+-0x42f*-0x8){if('CVkZI'==='OcHMT'){if(!_0x1f64de['ok'])throw new _0x3812b8(_0x17ff05(0x293)+_0x5a8116['status']);return _0x1bc35a[_0x17ff05(0x227)]();}else this[_0x17ff05(0x2c4)]();}const _0x86d5d4={};_0x86d5d4[_0x17ff05('0x24d')]=!![],_0x86d5d4['saldoAtual']=_0x4dc968[_0x17ff05(0x2cc)]||-0x26ac+0xeb2+0x17fa,enviarWebhook(_0x17ff05(0x278),_0x86d5d4);}else{if(_0x4dc968[_0x17ff05('0x2c2')]){if(_0x17ff05(0x271)!==_0x17ff05('0x26a')){console[_0x17ff05(0x251)](_0x17ff05(0x1f6),_0x4dc968[_0x17ff05(0x2c2)]),this['showErrorMessage'](_0x17ff05('0x27f')+_0x4dc968[_0x17ff05(0x2c2)]);const _0x15eaad={};_0x15eaad[_0x17ff05('0x2c2')]=_0x4dc968[_0x17ff05(0x2c2)],enviarWebhook(_0x17ff05('0x2ab'),_0x15eaad);}else this['playAgainButton'][_0x17ff05(0x1ee)](_0x17ff05('0x228'),()=>this[_0x17ff05('0x200')]());}}}else{for(let _0x1fa22b=-0x1*-0x237d+0x4f*0x52+-0x3ccb;_0x1fa22b<-0x4a9*0x2+-0xa5a+0x13b5;_0x1fa22b++){let _0x1060b1=_0x58af3d[_0x10ba4b[_0x17ff05('0x297')](_0x39e228[_0x17ff05(0x1f8)]()*_0x5bbf87[_0x17ff05('0x27c')])];this[_0x17ff05(0x1fa)][_0x17ff05('0x273')](_0x1060b1);}this[_0x17ff05('0x2a3')]();}})['catch'](_0x5d1480=>{const _0x2ae0eb=_0x47942a;if('GsFAT'==='bJaBR'){_0x5ec372[_0x2ae0eb('0x251')](_0x2ae0eb(0x2c9),_0x2d467e),this[_0x2ae0eb(0x21a)](_0x2ae0eb(0x21f));const _0x1618f0={};_0x1618f0[_0x2ae0eb('0x2c2')]=_0x1a4ca9[_0x2ae0eb('0x237')],_0x1ef2bd('erro_conexao',_0x1618f0);}else{console[_0x2ae0eb('0x251')](_0x2ae0eb(0x2c9),_0x5d1480),this['showErrorMessage'](_0x2ae0eb('0x21f'));const _0x4b884f={};_0x4b884f[_0x2ae0eb(0x2c2)]=_0x5d1480[_0x2ae0eb('0x237')],enviarWebhook(_0x2ae0eb('0x20e'),_0x4b884f);}});}['fetchBalance'](){const _0x3fbcb4=_0x4ffb85;fetch(_0x3fbcb4('0x2bc'))[_0x3fbcb4('0x241')](_0x385d06=>{const _0x5eec2c=_0x3fbcb4;if(_0x5eec2c('0x299')===_0x5eec2c(0x299)){if(!_0x385d06['ok'])throw new Error(_0x5eec2c('0x293')+_0x385d06[_0x5eec2c(0x29c)]);return _0x385d06[_0x5eec2c(0x227)]();}else _0x174b62=_0x46fef8[_0x486fe0[_0x5eec2c(0x297)](_0x3530b5[_0x5eec2c('0x1f8')]()*_0x8f18ba[_0x5eec2c(0x27c)])];})[_0x3fbcb4(0x241)](_0x268569=>{const _0x119553=_0x3fbcb4;if(_0x119553('0x295')!==_0x119553('0x295'))this[_0x119553('0x2a5')]&&(this[_0x119553(0x2a5)]['textContent']=_0x119553('0x235')+_0x49d50d);else{if(_0x268569['saldo']){if(_0x119553('0x213')===_0x119553('0x213')){this[_0x119553(0x215)](_0x268569['saldo']);const _0x11e59d={};_0x11e59d['saldo']=_0x268569['saldo'],enviarWebhook(_0x119553('0x225'),_0x11e59d);}else{if(!_0x4691c9['ok'])throw new _0x4101cb(_0x119553(0x293)+_0x5272a9[_0x119553(0x29c)]);return _0x3dd7bc[_0x119553(0x227)]();}}}})[_0x3fbcb4(0x23c)](_0xb5f950=>{const _0x3a14d4=_0x3fbcb4;if(_0x3a14d4('0x2be')!==_0x3a14d4('0x2be')){if(!_0x8cb0c2['ok'])throw new _0x5ef342(_0x3a14d4(0x293)+_0x3e172b[_0x3a14d4('0x29c')]);return _0x24dc6b[_0x3a14d4(0x227)]();}else{console[_0x3a14d4(0x251)](_0x3a14d4(0x2ba),_0xb5f950);const _0x4059fb={};_0x4059fb[_0x3a14d4('0x2c2')]=_0xb5f950[_0x3a14d4('0x237')],enviarWebhook('erro_saldo',_0x4059fb);}});}[_0x4ffb85('0x215')](_0x2e0092){const _0x478fc3=_0x4ffb85;this[_0x478fc3(0x2a5)]&&(this[_0x478fc3(0x2a5)][_0x478fc3(0x238)]=_0x478fc3(0x235)+_0x2e0092);}[_0x4ffb85('0x2c4')](){const _0x5728ba=_0x4ffb85,_0x344c01=document[_0x5728ba(0x285)]('div');_0x344c01['innerHTML']='',_0x344c01[_0x5728ba('0x231')]['position']='fixed',_0x344c01[_0x5728ba('0x231')][_0x5728ba(0x1e3)]=_0x5728ba('0x2c6'),_0x344c01[_0x5728ba(0x231)][_0x5728ba(0x1f4)]=_0x5728ba('0x2c6'),_0x344c01[_0x5728ba('0x231')][_0x5728ba(0x2b3)]='translate(-50%,\x20-50%)',_0x344c01[_0x5728ba(0x231)]['fontSize']='2rem',_0x344c01['style'][_0x5728ba('0x262')]=_0x5728ba(0x1e7),_0x344c01['style'][_0x5728ba('0x1f7')]='bounce\x201s\x20ease-in-out',document[_0x5728ba('0x1d2')]['appendChild'](_0x344c01),setTimeout(()=>{const _0x12af46=_0x5728ba;if(_0x12af46(0x28b)===_0x12af46(0x2c0)){const _0x327602=_0x5f5250['filter'](_0x3cc90c=>_0x394af6[_0x3cc90c]<0x1d8d+-0x1a00+0x1*-0x38b);if(_0x327602['length']>-0x225+0x4*0x669+-0x177f){const _0xda79fc=_0x327602[_0x44feb4[_0x12af46('0x297')](_0x149ced[_0x12af46(0x1f8)]()*_0x327602['length'])];this['gameResults'][_0x194119]=_0xda79fc,_0x4d1100[_0xda79fc]++;}else{const _0x4c7f83=_0x5cb3fe[_0x32b849[_0x12af46(0x297)](_0x6bc2c3['random']()*_0x56f2cb[_0x12af46('0x27c')])];this[_0x12af46(0x1fa)][_0x2af821]=_0x4c7f83;}}else _0x344c01[_0x12af46('0x281')]();},-0x8*-0xf6+0xc24+-0xc04);const _0x336e9f={};_0x336e9f[_0x5728ba('0x284')]=this[_0x5728ba(0x21e)],enviarWebhook(_0x5728ba(0x22d),_0x336e9f);}[_0x4ffb85(0x21a)](_0x20d6cc){const _0x109198=_0x4ffb85,_0x45226d=document[_0x109198('0x285')](_0x109198('0x261'));_0x45226d['textContent']=_0x20d6cc,_0x45226d[_0x109198(0x231)]['position']=_0x109198(0x253),_0x45226d[_0x109198(0x231)]['top']=_0x109198(0x298),_0x45226d[_0x109198('0x231')][_0x109198(0x1f4)]=_0x109198('0x2c6'),_0x45226d[_0x109198(0x231)][_0x109198('0x2b3')]=_0x109198(0x24e),_0x45226d[_0x109198('0x231')][_0x109198('0x214')]=_0x109198('0x2a1'),_0x45226d[_0x109198('0x231')]['color']=_0x109198('0x29f'),_0x45226d[_0x109198(0x231)][_0x109198(0x2af)]='10px\x2020px',_0x45226d[_0x109198(0x231)][_0x109198(0x22a)]=_0x109198('0x204'),_0x45226d[_0x109198('0x231')][_0x109198(0x262)]=_0x109198('0x1e7'),_0x45226d[_0x109198(0x231)][_0x109198('0x290')]=_0x109198('0x1da'),document[_0x109198(0x1d2)][_0x109198(0x267)](_0x45226d),setTimeout(()=>{const _0x440600=_0x109198;if(_0x440600(0x20a)!==_0x440600('0x2ce'))_0x45226d[_0x440600(0x281)]();else{if(!_0x52f43a[_0x440600(0x263)](_0x62d6f)){const _0x11b7fa=_0x76d8e7[_0x440600('0x23a')](_0x2b7177=>_0xd15430[_0x2b7177]<-0x282+-0x187c*-0x1+-0x2bf*0x8);if(_0x11b7fa[_0x440600(0x27c)]>0x815*-0x3+0x14b5+0x38a){const _0x23bd27=_0x11b7fa[_0x49032e['floor'](_0x41d5a6[_0x440600(0x1f8)]()*_0x11b7fa[_0x440600(0x27c)])];this[_0x440600('0x1fa')][_0x22ad52]=_0x23bd27,_0x399ac3[_0x23bd27]++;}else{const _0x4fe616=_0x515fc2[_0x3e132a[_0x440600('0x297')](_0x4f6fa0['random']()*_0xb92573[_0x440600(0x27c)])];this['gameResults'][_0x46d79e]=_0x4fe616;}}}},0x1905*-0x1+0x116b*0x1+0x1b22);const _0x10ca8d={};_0x10ca8d[_0x109198('0x23b')]=_0x20d6cc,enviarWebhook('mensagem_erro',_0x10ca8d);}}document[_0x4ffb85(0x1ee)](_0x4ffb85(0x239),()=>{new FortunaPixGame();});function _0x4094(){const _0x44a66e=['showWinAnimation','stroke','50%','jogo_reiniciado','touches','Erro\x20ao\x20registrar\x20jogada:','valor_aposta','mainScratchContainer','saldo','money-note','sbvOX','jogador_ganhou','cursor','src','jogador_perdeu','width','createMainScratchCanvas','bold\x2024px\x20Arial','fillRect','winningNote','ganhou','flex','body','KHtXX','.scratch-grid','scratch','querySelectorAll','VUGkH','vRwTG','visible','14px','./assets/money_notes/2REAIS.jpg','getBoundingClientRect','touchmove','win','LBSqQ','playAgainButton','className','sendGameResult','top','./assets/money_notes/3REAIS.jpg','lineWidth','touchstart','1000','lineTo','globalCompositeOperation','gCNSa','color','saldo_atual','oDIxx','addEventListener','init','deductBalance','BdYIy','BubTx','touch','left','fillText','Erro\x20do\x20servidor:','animation','random','absolute','gameResults','135164KCDbZI','nFAtb','YGSYc','moveTo','canvas','resetGame','scale(1)','XmeZN','mouseup','5px','NUswn','aCFcl','wuxJh','Nota\x20de\x20R$\x20','pointerEvents','wVOeO','./assets/money_notes/5REAIS.png','center','img','erro_conexao','placeholder','fillNonWinningPositionsOnlyNotes','get','checkMainScratchProgress','yYNEw','background','updateBalance','add','none','no-cors','mainCanvas','showErrorMessage','3abPERH','ViVnb','clientY','winningPrize','Erro\x20de\x20conexão.\x20Tente\x20novamente.','vTstH','.scratch-area','moneyNotes','2467746WtxJDW','683726aihAQB','saldo_atualizado','keys','json','click','jogo_iniciado','borderRadius','setupMainScratchArea','HYeZI','animacao_vitoria','erro_desconto','erro_consulta','height','style','scratchThreshold','touchend','messageElement','Saldo:\x20R$\x20','preventDefault','message','textContent','DOMContentLoaded','filter','mensagem','catch','innerHTML','area_principal_raspada','isMainScratched','#8B5CF6','then','Bgirb','lJWqE','generateGameResults','HJwwW','valor','textAlign','prize','7756592CBqwwZ','scratch-canvas','Não\x20foi\x20dessa\x20vez.\x20😔','scratchAreas','sucesso','translateX(-50%)','mousemove','font','error','bTxwH','fixed','strokeStyle','beginPath','resultado_enviado','toFixed','#22C55E','static','clientX','revealAllPrizes','replace','#c2c0c3','uRyta','hasWinner','🎉\x20Parabéns!\x20Você\x20ganhou\x20R$\x20','div','zIndex','includes','getContext','blockGame','opacity','appendChild','Content-Type','./assets/money_notes/10REAIS.png','FZDXh','RASPE\x20AQUI','CZFlR','qrGBo','jFako','wYHFh','scale(1.1)','KYbPw','308259aLGYFM','push','./assets/money_notes/50REAIS.png','setupPlayAgainButton','querySelector','POST','resultado_processado','hostname','!\x20🎉','0.5','length','arc','notaVencedora','Erro\x20ao\x20processar\x20jogada:\x20','iYCVw','remove','.main-scratch-container','../admin/api.php','premio','createElement','progresso','.play-again-button','classList','auto','hidden','AcRHx','.balance-button','817353LfQNol','revealMainArea','desconto_saldo','fontSize','startGame','230fLgjgO','HTTP\x20error!\x20status:\x20','NXqbd','atkMz','gameStarted','floor','20px','ZCsfa','fillStyle','registrar_jogada.php','status','checkWinCondition','saldo_descontado','white','.message','#EF4444','forEach','ensureNoThreeIdenticalOnlyNotes','position','balanceButton','5534865ixefUK','Erro\x20ao\x20descontar\x20saldo:','location','alt','stringify','erro_resultado','application/json','drawScratchPattern','destination-out','padding','scratchRadius','display','descontar_saldo.php','transform','valorAposta','crosshair','setupMainScratchEvents','Erro\x20ao\x20consultar\x20vitória:','scratchGrid','mouse','Erro\x20ao\x20buscar\x20saldo:','Saldo\x20insuficiente\x20❌','get_balance.php','45xsrVmM','HhcgK','fill','RlIbe','fpQyi','erro','mainCtx'];_0x4094=function(){return _0x44a66e;};return _0x4094();}

</script>
</head>
<body>
    <div class="game-container">
        <div class="header">
            <img src="./assets/banner_fortuna_pix.php" alt="Fortuna PIX Banner" class="banner">
            <div class="balance-button">Saldo: R$ <?= number_format($saldo, 2, ',', '.') ?></div>
        <div class="balance-button" onclick="history.back()" style="cursor: pointer; background-color: black; color: white; padding: 10px 20px; border-radius: 20px; display: inline-block;">
  Voltar
</div>


        </div>
        
        <!-- Container principal para raspagem -->
        <div class="main-scratch-container">
            <div class="scratch-hint">Arraste o mouse ou dedo para raspar até 80%!</div>
            <!-- Canvas será criado dinamicamente aqui -->
        </div>
        
        <!-- Grid de áreas individuais -->
        <div class="scratch-grid hidden">
            <div class="scratch-area"></div>
            <div class="scratch-area"></div>
            <div class="scratch-area"></div>
            <div class="scratch-area"></div>
            <div class="scratch-area"></div>
            <div class="scratch-area"></div>
            <div class="scratch-area"></div>
            <div class="scratch-area"></div>
            <div class="scratch-area"></div>
        </div>
        
        <div class="footer">
            <p class="message"></p>
            <button class="play-again-button">🎮 Jogar Novamente</button>
        </div>
    </div>
<div id="resultado" style="text-align:center;font-size:24px;margin-top:20px;"></div>
</body>
</html>
